import requests
from requests.auth import HTTPBasicAuth
import json

# --- Jira Settings ---
JIRA_URL = "https://your-domain.atlassian.net"  # Your Jira URL
EMAIL = "your-email@example.com"                 # Your Jira account email
API_TOKEN = "your-api-token"                      # Your API token (not password!)
PROJECT_KEY = "BICOE"                             # Your project key

# --- Task Details ---
issue_data = {
    "fields": {
        "project": {
            "key": PROJECT_KEY
        },
        "summary": "Sample Task Created by Python",
        "description": "This is a simple task created using Jira REST API and Python.",
        "issuetype": {
            "name": "Task"  # Example: Task, Bug, Story
        },
        "priority": {
            "name": "Medium"  # Example: High, Medium, Low
        }
    }
}

# --- Make the API Call ---
response = requests.post(
    f"{JIRA_URL}/rest/api/2/issue",
    headers={
        "Accept": "application/json",
        "Content-Type": "application/json"
    },
    auth=HTTPBasicAuth(EMAIL, API_TOKEN),
    data=json.dumps(issue_data)
)

# --- Result ---
if response.status_code == 201:
    issue_key = response.json()['key']
    print(f"Issue created successfully! Issue Key: {issue_key}")
else:
    print(f"Failed to create issue. Status Code: {response.status_code}")
    print(response.text)
