import requests
import json

# Define parameters
organization = "your_org"  # Replace with your Azure DevOps organization
project = "your_project"  # Replace with your Azure DevOps project
test_plan_id = 12520
test_suite_id = 12521
pat_token = "your_pat_token"  # Replace with your Personal Access Token

# Base64 encode the PAT
import base64
headers = {
    'Content-Type': 'application/json',
    'Authorization': 'Basic ' + base64.b64encode(f':{pat_token}'.encode()).decode()
}

# Define the API URL
url = f"https://dev.azure.com/{organization}/{project}/_apis/test/Plans/{test_plan_id}/suites/{test_suite_id}/points?api-version=7.1-preview.2"

# Make the GET request
response = requests.get(url, headers=headers)

# Parse the response
if response.status_code == 200:
    data = response.json()
    test_points = data.get('value', [])
    for point in test_points:
        print(f"Test Point ID: {point['id']}, Test Case ID: {point['testCase']['id']}, Configuration: {point['configuration']['name']}")
else:
    print(f"Failed to retrieve test points: {response.status_code} - {response.text}")
