🔄 Message Lifecycle & Sequence Management
Scenario	Description
Out-of-Sequence Quote Arrival	A later version of a quote (e.g., renewal) arrives before its prior version (e.g., new business) – the system should be able to queue, delay, or flag this.
Duplicate Quote Versions	Multiple identical quote versions are received – system should detect and ignore duplicates without processing again.
Skipped Version Numbers	A quote with version 3 is received, but version 2 never arrived – system should detect gaps and either wait or process based on policy rules.
Concurrent Quote Versions	NB and MTA quotes generated within seconds – system must ensure one doesn’t overwrite or incorrectly link the other.

🧩 Cross-Message Correlation Integrity
Scenario	Description
Missing Correlation Fields	MQSQuoteId or CacheId missing – system should quarantine or flag for retry.
Mismatch Between Linked Messages	PreComp, RatingRequest, RatingResponse carry mismatched QuoteIDs – the system must detect inconsistencies.
Incorrect Linking to Original Quote	For MTAs and Renewals, ensure linkage to original NB quote is maintained correctly.

⏱️ Timing and Latency
Scenario	Description
Delayed Message Arrival	Messages arrive significantly after expected SLA (e.g., >10 minutes) – test alerting and system retry logic.
Message Arrives Post-Cutoff	Quote data arrives after cutoff for pricing run – validate handling rules (discard, queue, mark stale).

🧪 Invalid or Partial Data Scenarios
Scenario	Description
Partial Payload	Message contains only partial JSON or missing key nested structures like rawEnrichments.
Invalid Enum/Reference Values	E.g., invalid productIdentifier or transactionTypeCode – should fail validation.
Unsupported Format or Schema Drift	E.g., unexpected data structure in enrichment – schema validation must catch and isolate.

🔐 Security & Access Issues
Scenario	Description
Unauthorized Field Access	PII like policyholder email/phone exposed to roles without access – verify role-based field-level access.
Audit Gaps in Sensitive Quote Update	Missing audit trail on sensitive quote updates – ensure every write is traceable.

🛠️ Infrastructure & Monitoring
Scenario	Description
EventHub Partition Skew	One partition receives too much load – test autoscaling or throttling alerts.
Message Reprocessing After Failure	Ensure idempotency – no duplicate records generated after system retries.
Unacknowledged EventHub Messages	Messages stay unconsumed beyond expected SLA – alerting and recovery needed.

📦 Backfill / Historical Loads
Scenario	Description
Historical Quotes in Wrong Format	Backfilled quotes might not align to current schema – test backward compatibility logic.
Large-Volume Backfill	Ensure system can process high volume historical messages without impacting real-time flows.
